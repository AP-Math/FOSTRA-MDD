<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Etické podnikání</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f2f2f2; }
    .stats { margin-bottom: 20px; }
    .decision { margin-top: 20px; }
    .btn { margin: 10px 0; padding: 10px 20px; background: #444; color: white; border: none; cursor: pointer; }
    .btn:hover { background: #333; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <h1>Etické podnikání</h1>

  <div class="stats">
    <p><strong>Zisk:</strong> <span id="zisk">0</span></p>
    <p><strong>Etika:</strong> <span id="etika">100</span> %</p>
    <p><strong>Riziko kolapsu:</strong> <span id="riziko">0</span> %</p>
  </div>

  <!-- Slide 1 -->
  <div id="slide1">
    <h2>Rozhodnutí 1: Bezpečnost</h2>
    <p>Snížíš výdaje na požární bezpečnost a zdravotní péči o zaměstnance?</p>

    <div class="decision">
      <button class="btn" onclick="volba(true)">Ano – ušetřím, ale snížím etiku</button>
      <button class="btn" onclick="volba(false)">Ne – investuji, udržím etiku</button>
    </div>
  </div>

  <div id="nextSlide" class="hidden">
    <button class="btn" onclick="jdiNaDalsi()">Pokračovat</button>
  </div>

  <!-- Slide s úkolem -->
  <div id="slideUkol" class="hidden">
    <h2>Úkol: Výpočet</h2>
    <p>Vypočítej: Pokud zaměstnáš 20 dětí a každému platíš 10 Kč/hod a pracují 10 hodin denně, kolik je to za den?</p>
    <input type="number" id="odpoved" placeholder="Zadej výsledek">
    <button class="btn" onclick="zpracujUkol()">Odeslat odpověď</button>
    <p id="vysledek"></p>
  </div>

  <!-- Slide Požární bezpečnost -->
  <div id="slidePozar" class="hidden">
    <h2>Rozhodnutí 2: Požární bezpečnost</h2>
    <p>Chceš investovat do zlepšení požární bezpečnosti ve své továrně?</p>
    <div class="decision">
      <button class="btn" onclick="rozhodnutiPozar('investovat')">Ano – bezpečnost na prvním místě</button>
      <button class="btn" onclick="rozhodnutiPozar('setrit')">Ne – ušetřím</button>
    </div>
    <p id="zpravaPozar"></p>
  </div>

  <script>
    let zisk = 0;
    let etika = 100;
    let riziko = 0;

    function aktualizuj() {
      document.getElementById("zisk").textContent = zisk;
      document.getElementById("etika").textContent = etika;
      document.getElementById("riziko").textContent = riziko;
    }

   function volba(snizitBezpecnost) {
  // Zakáže všechna tlačítka v tomto rozhodnutí
  const tlacitka = document.querySelectorAll("#slide1 .btn");
  tlacitka.forEach(btn => btn.disabled = true);

  if (snizitBezpecnost) {
    zisk += 2000;
    etika -= 30;
    riziko += 20;
  } else {
    zisk += 500;
  }
  aktualizuj();
  document.getElementById("nextSlide").classList.remove("hidden");
}

    function jdiNaDalsi() {
      document.getElementById("slide1").classList.add("hidden");
      document.getElementById("nextSlide").classList.add("hidden");
      document.getElementById("slideUkol").classList.remove("hidden");
    }

   let spatnePokusy = 0;

function zpracujUkol() {
  const odpoved = parseInt(document.getElementById("odpoved").value, 10);
  const spravne = 20 * 10 * 10;
  const vysledek = document.getElementById("vysledek");

  if (odpoved === spravne) {
    vysledek.innerHTML = "✅ <strong>BINGO!</strong> Pokračuj dál.";
    zisk += 2000;
    aktualizuj();

    // Po 2 vteřinách přejdi na další slide
    setTimeout(() => {
      document.getElementById("slideUkol").classList.add("hidden");
      document.getElementById("slidePozar").classList.remove("hidden");
    }, 2000);

  } else {
    spatnePokusy++;
    zisk -= 500;
    aktualizuj();

    if (zisk < 0 || etika < 0) {
      alert("💥 Kaput. Začni celý quest úplně od začátku.");
      location.reload();
      return;
    }

    if (spatnePokusy < 3) {
      vysledek.innerHTML = "❌ Špatně. Zkus to znovu. (Zisk se snížil o 500 Kč)";
    } else {
      vysledek.innerHTML = "<strong>🧠 Domluv konzultační hodinu se svým matikářem.</strong>";
    }
  }
}


function rozhodnutiPozar(volba) {
  // Zakáže tlačítka pro rozhodnutí
  const tlacitka = document.querySelectorAll("#slidePozar .btn");
  tlacitka.forEach(btn => btn.disabled = true);

  const zprava = document.getElementById("zpravaPozar");

  if (volba === 'investovat') {
    zisk -= 500;
    riziko = Math.max(0, riziko - 10); // např. snížení rizika
    zprava.textContent = "Investovali jste do bezpečnosti. Zisk je nyní nižší, ale riziko kolapsu kleslo.";
  } else {
    zisk += 500;
    riziko += 20;
    zprava.textContent = "Ušetřili jste, ale riziko požáru výrazně vzrostlo.";
  }

  aktualizuj();
}

    aktualizuj();
  </script>

</body>
</html>
